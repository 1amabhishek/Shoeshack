import{a as X,b as Y}from"./chunk-AK5KF7PQ.js";import{$ as ft,A as I,B as Q,C as tt,E as et,I as it,Ia as vt,M as rt,O as k,P as ot,Q as V,R as nt,S as at,T as ct,U as dt,V as mt,X as lt,Y as st,Z as pt,_ as ut,aa as gt,ba as _t,i as j,r as $,s as H,t as Z,u as q,v as J,w as K,wa as Ct,x as P,y as D,z as E}from"./chunk-ZU2ZXMGP.js";import{$a as g,$b as U,Ab as L,Bb as N,Cb as a,Db as c,Ea as F,Eb as d,Ib as M,Lb as u,Nb as f,Pc as W,Sc as b,Tc as z,Wa as y,Wb as m,Yb as p,_a as n,_b as R,ac as G,ca as x,ec as w,gc as T,ma as h,na as S,rb as O,tb as s,va as C,wa as v,yb as B}from"./chunk-RJHPHPNE.js";var St=(()=>{let i=class i{constructor(r,t,e){this.dialogRef=r,this.product=t,this.cartService=e,this.addedToCartIndicator=!1}addToCart(){this.addedToCartIndicator=!0,this.cartService.addProduct(this.product),setTimeout(()=>{this.addedToCartIndicator=!1},500)}closeDialog(){this.dialogRef.close()}};i.\u0275fac=function(t){return new(t||i)(g($),g(H),g(P))},i.\u0275cmp=h({type:i,selectors:[["app-product-details-dialog"]],decls:35,vars:13,consts:[["mat-dialog-title","",1,"mat-dialog-title"],["svgIcon","shoe-sneaker",1,"mr-2"],[1,"flex-spacer"],["mat-icon-button","",3,"click"],["svgIcon","close"],["alt","product image",3,"src"],[1,"flex-aligned","ml-2"],["svgIcon","shoe-sneaker","color","primary",1,"mr-1"],["svgIcon","domain","color","primary",1,"mr-1"],["svgIcon","palette","color","primary",1,"mr-1"],["svgIcon","tag","color","primary",1,"mr-1"],["svgIcon","cash","color","primary",1,"mr-1"],["id","description",1,"mt-2"],["align","end",1,"mat-dialog-actions"],["mat-button","","color","basic",3,"click"],["mat-flat-button","","color","primary",3,"click","disabled"],[1,"mr-2",3,"svgIcon"]],template:function(t,e){t&1&&(a(0,"h2",0),d(1,"mat-icon",1),m(2," View product "),d(3,"div",2),a(4,"button",3),u("click",function(){return e.closeDialog()}),d(5,"mat-icon",4),c()(),a(6,"mat-dialog-content"),d(7,"img",5),a(8,"section")(9,"p",6),d(10,"mat-icon",7),m(11),c(),a(12,"p",6),d(13,"mat-icon",8),m(14),c(),a(15,"p",6),d(16,"mat-icon",9),m(17),c(),a(18,"p",6),d(19,"mat-icon",10),m(20),c(),a(21,"p",6),d(22,"mat-icon",11),m(23),w(24,"number"),c()(),a(25,"section",12)(26,"p"),m(27),c()()(),a(28,"mat-dialog-actions",13)(29,"button",14),u("click",function(){return e.closeDialog()}),d(30,"mat-icon",4),m(31," Close "),c(),a(32,"button",15),u("click",function(){return e.addToCart()}),d(33,"mat-icon",16),m(34),c()()),t&2&&(n(7),s("src",e.product.imageUrl,y),n(4),p(" ",e.product.name," "),n(3),p(" ",e.product.brand," "),n(3),p(" ",e.product.color," "),n(3),p(" ",e.product.category," "),n(3),p(" \u20B9 ",T(24,10,e.product.price,"1.2-2")," "),n(4),p(" ",e.product.description," "),n(5),s("disabled",e.addedToCartIndicator),n(),s("svgIcon",e.addedToCartIndicator?"check":"cart-plus"),n(),p(" ",e.addedToCartIndicator?"Added to cart":"Add to cart"," "))},dependencies:[D,E,I,q,K,J,b],styles:["img[_ngcontent-%COMP%]{object-fit:cover;width:100%;height:250px}mat-dialog-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr}#description[_ngcontent-%COMP%]{grid-column:1/3;text-align:justify}"]});let o=i;return o})();var yt=(()=>{let i=class i{constructor(){this.addToCart=new F,this.viewProduct=new F}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=h({type:i,selectors:[["app-product-card"]],inputs:{product:"product",addedToCartIndicator:"addedToCartIndicator"},outputs:{addToCart:"addToCart",viewProduct:"viewProduct"},decls:27,vars:12,consts:[[1,"flex-aligned"],["svgIcon","shoe-sneaker",1,"mr-2"],["svgIcon","domain",1,"mr-1"],["svgIcon","palette",1,"ml-3","mr-1"],["matCardImage","","alt","product image",3,"src"],[1,"mt-2"],[1,"inline-flex-aligned","badge-primary"],["svgIcon","tag",1,"mr-2"],[1,"inline-flex-aligned","badge-accent","ml-2"],["svgIcon","cash",1,"mr-2"],["align","end"],["mat-flat-button","","color","accent",1,"mr-2",3,"click"],["svgIcon","eye",1,"mr-2"],["mat-flat-button","","color","primary",1,"mr-2",3,"click","disabled"],[1,"mr-2",3,"svgIcon"]],template:function(t,e){t&1&&(a(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title",0),d(3,"mat-icon",1),m(4),c(),a(5,"mat-card-subtitle",0),d(6,"mat-icon",2),m(7),d(8,"mat-icon",3),m(9),c()(),d(10,"img",4),a(11,"mat-card-content",5)(12,"p")(13,"span",6),d(14,"mat-icon",7),m(15),c(),a(16,"span",8),d(17,"mat-icon",9),m(18),w(19,"number"),c()()(),a(20,"mat-card-actions",10)(21,"button",11),u("click",function(){return e.viewProduct.emit()}),d(22,"mat-icon",12),m(23," See "),c(),a(24,"button",13),u("click",function(){return e.addToCart.emit()}),d(25,"mat-icon",14),m(26),c()()()),t&2&&(n(4),p(" ",e.product.name," "),n(3),p(" ",e.product.brand," "),n(2),p(" ",e.product.color," "),n(),s("src",e.product.imageUrl,y),n(5),p(" ",e.product.category," "),n(3),p(" \u20B9 ",T(19,9,e.product.price,"1.2-2")," "),n(6),s("disabled",e.addedToCartIndicator),n(),s("svgIcon",e.addedToCartIndicator?"check":"cart-plus"),n(),p(" ",e.addedToCartIndicator?"Added to cart":"Add to cart"," "))},dependencies:[D,I,k,at,V,ct,dt,nt,ot,b],styles:["mat-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;width:100%;height:200px}mat-card[_ngcontent-%COMP%]{width:305px}"]});let o=i;return o})();var Et=(o,i)=>i.id;function kt(o,i){if(o&1){let l=M();a(0,"button",12),u("click",function(){C(l);let t=f(2);return t.filters.search="",v(t.applyFilters())}),d(1,"mat-icon",13),c()}}function Vt(o,i){if(o&1){let l=M();a(0,"app-product-card",14),u("addToCart",function(){let t=C(l).$implicit,e=f(2);return v(e.addToCart(t))})("viewProduct",function(){let t=C(l).$implicit,e=f(2);return v(e.viewProduct(t))}),c()}if(o&2){let l=i.$implicit,r=f(2);s("product",l)("addedToCartIndicator",r.addedToCartProductIndicator===l.id)}}function At(o,i){o&1&&(a(0,"mat-card",11)(1,"mat-card-content",15),d(2,"mat-icon",16),a(3,"p"),m(4,"There are no products available."),c()()())}function Ft(o,i){if(o&1){let l=M();a(0,"main")(1,"section",2)(2,"mat-form-field",3)(3,"mat-label"),m(4," Look for... "),c(),a(5,"input",4),G("ngModelChange",function(t){C(l);let e=f();return U(e.filters.search,t)||(e.filters.search=t),v(t)}),u("input",function(){C(l);let t=f();return v(t.applyFilters())}),c(),d(6,"mat-icon",5),O(7,kt,2,0,"button",6),c(),a(8,"app-menu-selection-filter",7),u("selected",function(t){C(l);let e=f();return v(e.onCategoriesSelected(t))}),c(),a(9,"app-menu-selection-filter",8),u("selected",function(t){C(l);let e=f();return v(e.onBrandsSelected(t))}),c()(),a(10,"section",9),L(11,Vt,1,2,"app-product-card",10,Et,!1,At,5,0,"mat-card",11),c()()}if(o&2){let l=f();n(5),R("ngModel",l.filters.search),n(2),B(7,l.filters.search?7:-1),n(),s("items",l.categories),n(),s("items",l.brands),n(2),N(l.filteredProducts)}}function Ot(o,i){if(o&1&&d(0,"app-loading-view",17),o&2){let l=f();s("state",l.viewState)}}var Mt=(()=>{let i=class i{constructor(r,t,e,_){this.productsService=r,this.cartService=t,this.productMapper=e,this.dialog=_,this.filters={search:"",categories:[],brands:[]},this.viewState="loading"}ngOnInit(){this.getProducts()}getProducts(){this.viewState="loading",this.productsService.getAllProducts().subscribe({next:r=>{this.products=this.productMapper.mapGetAllProductsResponseDtoToModel(r),this.filteredProducts=r.products,this.categories=Array.from(new Set(r.products.map(t=>t.category))),this.brands=Array.from(new Set(r.products.map(t=>t.brand))),this.viewState="ready"},error:r=>{this.viewState="error"}})}onCategoriesSelected(r){this.filters.categories=r,this.applyFilters()}onBrandsSelected(r){this.filters.brands=r,this.applyFilters()}applyFilters(){this.filteredProducts=this.products.filter(r=>{let t=r.name.toLowerCase().includes(this.filters.search.toLowerCase())||!this.filters.search,e=this.filters.categories.length?this.filters.categories.includes(r.category):!0,_=this.filters.brands.length?this.filters.brands.includes(r.brand):!0;return t&&e&&_})}addToCart(r){this.cartService.addProduct(r),this.addedToCartProductIndicator=r.id,setTimeout(()=>{this.addedToCartProductIndicator=0},500)}viewProduct(r){this.dialog.open(St,{width:Q.md,data:r})}};i.\u0275fac=function(t){return new(t||i)(g(X),g(P),g(Y),g(Z))},i.\u0275cmp=h({type:i,selectors:[["app-store"]],decls:3,vars:2,consts:[[4,"ngIf"],["view","tienda",3,"state",4,"ngIf"],[1,"filter-bar","mb-3","mx-2","mt-2"],["appearance","outline","color","primary",1,"search","mt-1"],["matInput","","type","text","placeholder","Search...",3,"ngModelChange","input","ngModel"],["matPrefix","","svgIcon","magnify"],["mat-icon-button","","matSuffix",""],["icon","tag",3,"selected","items"],["icon","domain",3,"selected","items"],[1,"products","mx-2"],[3,"product","addedToCartIndicator"],["id","emptyList",1,"w-100","mx-4"],["mat-icon-button","","matSuffix","",3,"click"],["svgIcon","close"],[3,"addToCart","viewProduct","product","addedToCartIndicator"],[1,"text-center"],["svgIcon","store-search","color","warn",1,"icon-2x","py-3"],["view","tienda",3,"state"]],template:function(t,e){t&1&&(d(0,"app-navbar"),O(1,Ft,14,5,"main",0)(2,Ot,1,1,"app-loading-view",1)),t&2&&(n(),s("ngIf",e.viewState==="ready"),n(),s("ngIf",e.viewState!=="ready"))},dependencies:[W,tt,et,it,E,I,k,V,pt,mt,lt,st,ut,ft,gt,_t,yt],styles:["main[_ngcontent-%COMP%]{display:grid}.filter-bar[_ngcontent-%COMP%]{display:flex;align-items:center}.filter-bar[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{max-width:100%;flex:1;margin-bottom:-1rem}.products[_ngcontent-%COMP%]{display:grid;gap:16px;place-items:center;grid-template-columns:repeat(auto-fill,minmax(305px,1fr))}#emptyList[_ngcontent-%COMP%]{grid-column:1/-1}"]});let o=i;return o})();var jt=[{path:"",component:Mt}],wt=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=S({type:i}),i.\u0275inj=x({imports:[j.forChild(jt),j]});let o=i;return o})();var fe=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=S({type:i}),i.\u0275inj=x({imports:[z,rt,Ct,wt,vt]});let o=i;return o})();export{fe as StoreModule};
