import{a as f}from"./chunk-ZQRFGBOX.js";import{A as H,Aa as h,Ba as _,C as J,D as d,E as K,F as W,G as X,H as P,Ia as fe,J as Y,K as Z,L as $,N as ee,O as te,P as re,Q as ie,S as oe,T as ne,V as ae,W as me,X as le,Y as se,Z as pe,_ as ce,g as V,h as Q,i as x,j as G,p as B,wa as de,y as U,z}from"./chunk-ZU2ZXMGP.js";import{$a as w,Cb as o,Db as i,Eb as p,Lb as v,N as k,Pc as j,Sb as C,Tb as E,Tc as q,Ub as I,Wb as n,Yb as O,_a as a,ca as u,ma as F,na as g,rb as y,tb as m}from"./chunk-RJHPHPNE.js";function _e(t,e){t&1&&(o(0,"mat-error",20),n(1," Email is required "),i())}function we(t,e){t&1&&(o(0,"mat-error",20),n(1," The email is not valid "),i())}function ye(t,e){t&1&&(o(0,"mat-error",20),n(1," The email must have a maximum of 320 characters "),i())}function ve(t,e){t&1&&(o(0,"mat-error",20),n(1," Password is required "),i())}function Ce(t,e){t&1&&(o(0,"mat-error",20),n(1," Password must be at least 10 characters "),i())}function Ee(t,e){t&1&&(o(0,"mat-error",20),n(1," Password must have a maximum of 100 characters "),i())}function Ie(t,e){t&1&&(o(0,"mat-error",20),n(1," Password must contain at least one number "),i())}function xe(t,e){t&1&&(o(0,"mat-error",20),n(1," Password must contain at least one uppercase letter "),i())}function Pe(t,e){t&1&&(o(0,"mat-error",20),n(1," Password must contain at least one lowercase letter "),i())}function Se(t,e){t&1&&(o(0,"mat-error",20),n(1," Password must contain at least one special character "),i())}var ge=(()=>{let e=class e{constructor(c,l){this.authService=c,this.router=l,this.form=new X({email:new P("",[d.required,d.email,d.maxLength(320)]),password:new P("",[d.required,d.minLength(10),d.maxLength(100),f.hasLowercase(),f.hasUppercase(),f.hasNumber(),f.hasSpecialCharacter()])}),this.APP_PROPERTIES=G,this.passwordInputType="password"}togglePasswordVisibility(){this.passwordInputType=this.passwordInputType==="password"?"text":"password"}login(){this.form.markAllAsTouched(),!this.form.invalid&&(this.loadingDialog.open(),this.authService.login(this.form.value).pipe(k(()=>this.loadingDialog.close())).subscribe({next:()=>{this.router.navigateByUrl("/store")},error:c=>{this.errorDialog.open("An error occurred while logging in",c.message)}}))}};e.\u0275fac=function(l){return new(l||e)(w(B),w(V))},e.\u0275cmp=F({type:e,selectors:[["app-login"]],viewQuery:function(l,r){if(l&1&&(C(h,5),C(_,5)),l&2){let s;E(s=I())&&(r.loadingDialog=s.first),E(s=I())&&(r.errorDialog=s.first)}},decls:43,vars:15,consts:[[1,"mt-3"],[1,"inline-flex-aligned","justify-center","w-100"],[1,"mr-3","icon-lg",3,"svgIcon"],[1,"mx-3"],[1,"justify-center"],[1,"inline-flex-aligned"],["svgIcon","login",1,"mr-2"],[1,"mt-3","mb-2","form",3,"formGroup"],["appearance","outline","color","primary",1,"mat-form-field"],["matInput","","type","text","placeholder","Email...","formControlName","email"],["matPrefix","","svgIcon","email"],["class","mat-error",4,"ngIf"],["matInput","","placeholder","Password...","formControlName","password",3,"type"],["matPrefix","","svgIcon","lock"],["mat-icon-button","","matSuffix","",3,"click"],[3,"svgIcon"],["mat-flat-button","","color","primary",3,"click"],["svgIcon","login"],["mat-button","","routerLink","/register",1,"ml-2"],["svgIcon","account-plus"],[1,"mat-error"]],template:function(l,r){if(l&1&&(o(0,"main",0)(1,"div")(2,"h1",1),p(3,"mat-icon",2),n(4),i(),o(5,"mat-card",3)(6,"mat-card-header",4)(7,"mat-card-title",5),p(8,"mat-icon",6),n(9," Access "),i()(),o(10,"mat-card-content")(11,"form",7)(12,"mat-form-field",8)(13,"mat-label"),n(14," Email "),i(),p(15,"input",9)(16,"mat-icon",10),y(17,_e,2,0,"mat-error",11)(18,we,2,0,"mat-error",11)(19,ye,2,0,"mat-error",11),i(),o(20,"mat-form-field",8)(21,"mat-label"),n(22," Password "),i(),p(23,"input",12)(24,"mat-icon",13),o(25,"button",14),v("click",function(){return r.togglePasswordVisibility()}),p(26,"mat-icon",15),i(),y(27,ve,2,0,"mat-error",11)(28,Ce,2,0,"mat-error",11)(29,Ee,2,0,"mat-error",11)(30,Ie,2,0,"mat-error",11)(31,xe,2,0,"mat-error",11)(32,Pe,2,0,"mat-error",11)(33,Se,2,0,"mat-error",11),i()()(),o(34,"mat-card-actions")(35,"button",16),v("click",function(){return r.login()}),p(36,"mat-icon",17),n(37," Log in "),i(),o(38,"button",18),p(39,"mat-icon",19),n(40," Don't have an account? "),i()()()()(),p(41,"app-error-dialog")(42,"app-loading-dialog")),l&2){let s,S,M,T,L,b,D,N,R,A;a(3),m("svgIcon",r.APP_PROPERTIES.icon),a(),O(" ",r.APP_PROPERTIES.title," "),a(7),m("formGroup",r.form),a(6),m("ngIf",(s=r.form.get("email"))==null?null:s.hasError("required")),a(),m("ngIf",(S=r.form.get("email"))==null?null:S.hasError("email")),a(),m("ngIf",(M=r.form.get("email"))==null?null:M.hasError("maxLength")),a(4),m("type",r.passwordInputType),a(3),m("svgIcon",r.passwordInputType==="password"?"eye":"eye-off"),a(),m("ngIf",(T=r.form.get("password"))==null?null:T.hasError("required")),a(),m("ngIf",(L=r.form.get("password"))==null?null:L.hasError("minlength")),a(),m("ngIf",(b=r.form.get("password"))==null?null:b.hasError("maxlength")),a(),m("ngIf",(D=r.form.get("password"))==null?null:D.hasError("hasNumber")),a(),m("ngIf",(N=r.form.get("password"))==null?null:N.hasError("hasUppercase")),a(),m("ngIf",(R=r.form.get("password"))==null?null:R.hasError("hasLowercase")),a(),m("ngIf",(A=r.form.get("password"))==null?null:A.hasError("hasSpecialCharacter"))}},dependencies:[j,Q,U,z,H,te,oe,ie,ne,re,pe,ae,me,le,se,ce,Y,J,K,W,Z,$,h,_],styles:["main[_ngcontent-%COMP%]{display:grid;width:100%;height:100%}main[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%;max-width:500px;place-self:center}mat-card[_ngcontent-%COMP%]{border-radius:25px;box-shadow:0 0 12px #0003;background-color:#f5f5f5}mat-card-actions[_ngcontent-%COMP%]{padding:0 16px 16px!important;display:grid;row-gap:12px;grid-auto-rows:max-content}"]});let t=e;return t})();var Me=[{path:"",component:ge}],he=(()=>{let e=class e{};e.\u0275fac=function(l){return new(l||e)},e.\u0275mod=g({type:e}),e.\u0275inj=u({imports:[x.forChild(Me),x]});let t=e;return t})();var rt=(()=>{let e=class e{};e.\u0275fac=function(l){return new(l||e)},e.\u0275mod=g({type:e}),e.\u0275inj=u({imports:[q,he,de,ee,fe]});let t=e;return t})();export{rt as LoginModule};
