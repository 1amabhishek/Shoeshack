import{a as we}from"./chunk-GRD75GYV.js";import{a as h}from"./chunk-ZQRFGBOX.js";import{A as W,Aa as E,Ba as P,C as X,D as f,E as Y,F as Z,G as $,H as y,Ia as _e,J as ee,K as te,L as re,N as ie,O as oe,P as ae,Q as ne,S as me,T as se,V as le,W as pe,X as ce,Y as de,Z as fe,_ as ue,g as G,h as B,i as T,j as z,ja as ge,p as H,wa as he,y as J,z as K}from"./chunk-ZU2ZXMGP.js";import{$a as v,Cb as a,Db as o,Eb as m,Lb as C,N as F,Pc as Q,Sb as S,Tb as I,Tc as U,Ub as x,Wb as n,Yb as q,_a as i,ca as _,ma as j,na as w,rb as d,tb as s,vb as u,yb as g}from"./chunk-RJHPHPNE.js";function Ee(e,r){e&1&&(a(0,"mat-error",28),n(1," Email is required "),o())}function Pe(e,r){e&1&&(a(0,"mat-error",28),n(1," The email is not valid "),o())}function Se(e,r){e&1&&(a(0,"mat-error",28),n(1," The email must have a maximum of 320 characters "),o())}function Ie(e,r){e&1&&m(0,"mat-icon",21)}function xe(e,r){e&1&&m(0,"mat-icon",29)}function Te(e,r){e&1&&m(0,"mat-icon",21)}function Re(e,r){e&1&&m(0,"mat-icon",29)}function be(e,r){e&1&&m(0,"mat-icon",21)}function Me(e,r){e&1&&m(0,"mat-icon",29)}function Ne(e,r){e&1&&m(0,"mat-icon",21)}function ke(e,r){e&1&&m(0,"mat-icon",29)}function Ae(e,r){e&1&&m(0,"mat-icon",21)}function Ve(e,r){e&1&&m(0,"mat-icon",29)}function De(e,r){e&1&&(a(0,"mat-error",28),n(1," Confirmation is required "),o())}function Le(e,r){e&1&&(a(0,"mat-error",28),n(1," Confirmation must be at least 10 characters "),o())}function Oe(e,r){e&1&&(a(0,"mat-error",28),n(1," Confirmation must have a maximum of 100 characters "),o())}function Fe(e,r){e&1&&(a(0,"mat-error",28),n(1," Confirmation must contain at least one number "),o())}function je(e,r){e&1&&(a(0,"mat-error",28),n(1," Confirmation must contain at least one uppercase letter "),o())}function qe(e,r){e&1&&(a(0,"mat-error",28),n(1," Confirmation must contain at least one lowercase letter "),o())}function Qe(e,r){e&1&&(a(0,"mat-error",28),n(1," Confirmation must contain at least one special character "),o())}function Ue(e,r){e&1&&(a(0,"mat-error",28),n(1," Confirmation must match the password "),o())}var Ce=(()=>{let r=class r{constructor(c,l,t){this.userService=c,this.authService=l,this.router=t,this.APP_PROPERTIES=z,this.passwordInputType="password",this.passwordStrength=0,this.form=new $({email:new y("",[f.required,f.email,f.maxLength(320)]),password:new y("",[f.required,f.minLength(10),f.maxLength(100),h.hasLowercase(),h.hasUppercase(),h.hasNumber(),h.hasSpecialCharacter()]),confirmPassword:new y("",[f.required])})}togglePasswordVisibility(){this.passwordInputType=this.passwordInputType==="password"?"text":"password"}passwordMatchValidation(){this.form.get("password").value!==this.form.get("confirmPassword").value&&this.form.get("confirmPassword").setErrors({passwordMatch:!0})}startPasswordMatchValidation(){this.form.get("confirmPassword").valueChanges.subscribe(()=>this.passwordMatchValidation())}determinePasswordStrength(){this.passwordStrength=this.userService.determinePasswordStrength(this.form.get("password").value)}startPasswordStrengthValidation(){this.form.get("password").valueChanges.subscribe(()=>this.determinePasswordStrength())}ngOnInit(){this.startPasswordMatchValidation(),this.startPasswordStrengthValidation()}register(){this.form.markAllAsTouched(),!this.form.invalid&&(this.loadingDialog.open(),this.authService.register(this.form.value).pipe(F(()=>this.loadingDialog.close())).subscribe({next:()=>{this.router.navigateByUrl("/login")},error:c=>{this.errorDialog.open("Ocurri\xF3 un error al registrar el usuario",c.message)}}))}};r.\u0275fac=function(l){return new(l||r)(v(we),v(H),v(G))},r.\u0275cmp=j({type:r,selectors:[["app-register"]],viewQuery:function(l,t){if(l&1&&(S(E,5),S(P,5)),l&2){let p;I(p=x())&&(t.loadingDialog=p.first),I(p=x())&&(t.errorDialog=p.first)}},decls:75,vars:36,consts:[[1,"mt-3"],[1,"inline-flex-aligned","justify-center","w-100"],[1,"mr-3","icon-lg",3,"svgIcon"],[1,"mx-3"],[1,"justify-center"],[1,"inline-flex-aligned"],["svgIcon","account-plus",1,"mr-2"],[1,"mt-3","mb-2","form",3,"formGroup"],["appearance","outline","color","primary",1,"mat-form-field"],["matInput","","type","text","placeholder","Email...","formControlName","email"],["matPrefix","","svgIcon","email"],["class","mat-error",4,"ngIf"],["appearance","outline","color","primary",1,"mat-form-field","password-field"],["matInput","","placeholder","Password...","formControlName","password",3,"type"],["matPrefix","","svgIcon","lock"],["mat-icon-button","","matSuffix","",3,"click"],[3,"svgIcon"],[1,"text-muted"],["mode","determinate","color","primary",3,"value"],[1,"mt-2","mb-1","ml-2","password-hint"],[1,"flex-aligned","my-0","py-0","ml-1"],["svgIcon","check"],["matInput","","placeholder","Confirmation...","formControlName","confirmPassword",3,"type"],["matPrefix","","svgIcon","lock-check"],["mat-flat-button","","color","primary",3,"click"],["svgIcon","account-plus"],["mat-button","","routerLink","/login",1,"ml-2"],["svgIcon","login"],[1,"mat-error"],["svgIcon","minus"]],template:function(l,t){if(l&1&&(a(0,"main",0)(1,"div")(2,"h1",1),m(3,"mat-icon",2),n(4),o(),a(5,"mat-card",3)(6,"mat-card-header",4)(7,"mat-card-title",5),m(8,"mat-icon",6),n(9," Register "),o()(),a(10,"mat-card-content")(11,"form",7)(12,"mat-form-field",8)(13,"mat-label"),n(14," Email "),o(),m(15,"input",9)(16,"mat-icon",10),d(17,Ee,2,0,"mat-error",11)(18,Pe,2,0,"mat-error",11)(19,Se,2,0,"mat-error",11),o(),a(20,"mat-form-field",12)(21,"mat-label"),n(22," Password "),o(),m(23,"input",13)(24,"mat-icon",14),a(25,"button",15),C("click",function(){return t.togglePasswordVisibility()}),m(26,"mat-icon",16),o()(),a(27,"div",17),m(28,"mat-progress-bar",18),a(29,"p",19),n(30," The password must include: "),o(),a(31,"p",20),d(32,Ie,1,0,"mat-icon",21)(33,xe,1,0),n(34," At least 10 characters "),o(),a(35,"p",20),d(36,Te,1,0,"mat-icon",21)(37,Re,1,0),n(38," At least one number "),o(),a(39,"p",20),d(40,be,1,0,"mat-icon",21)(41,Me,1,0),n(42," At least one uppercase letter "),o(),a(43,"p",20),d(44,Ne,1,0,"mat-icon",21)(45,ke,1,0),n(46," At least one lowercase letter "),o(),a(47,"p",20),d(48,Ae,1,0,"mat-icon",21)(49,Ve,1,0),n(50," At least one special character "),o()(),a(51,"mat-form-field",8)(52,"mat-label"),n(53," Confirm password "),o(),m(54,"input",22)(55,"mat-icon",23),a(56,"button",15),C("click",function(){return t.togglePasswordVisibility()}),m(57,"mat-icon",16),o(),d(58,De,2,0,"mat-error",11)(59,Le,2,0,"mat-error",11)(60,Oe,2,0,"mat-error",11)(61,Fe,2,0,"mat-error",11)(62,je,2,0,"mat-error",11)(63,qe,2,0,"mat-error",11)(64,Qe,2,0,"mat-error",11)(65,Ue,2,0,"mat-error",11),o()()(),a(66,"mat-card-actions")(67,"button",24),C("click",function(){return t.register()}),m(68,"mat-icon",25),n(69," Register "),o(),a(70,"button",26),m(71,"mat-icon",27),n(72," Already have an account? "),o()()()()(),m(73,"app-error-dialog")(74,"app-loading-dialog")),l&2){let p,R,b,M,N,k,A,V,D,L,O;i(3),s("svgIcon",t.APP_PROPERTIES.icon),i(),q(" ",t.APP_PROPERTIES.title," "),i(7),s("formGroup",t.form),i(6),s("ngIf",(p=t.form.get("email"))==null?null:p.hasError("required")),i(),s("ngIf",(R=t.form.get("email"))==null?null:R.hasError("email")),i(),s("ngIf",(b=t.form.get("email"))==null?null:b.hasError("maxLength")),i(4),s("type",t.passwordInputType),i(3),s("svgIcon",t.passwordInputType==="password"?"eye":"eye-off"),i(2),s("value",t.passwordStrength),i(),u("text-primary",t.passwordStrength===100),i(2),u("text-primary",t.form.get("password").value&&!t.form.get("password").hasError("minlength")),i(),g(32,t.form.get("password").value&&!t.form.get("password").hasError("minlength")?32:33),i(3),u("text-primary",t.form.get("password").value&&!t.form.get("password").hasError("hasNumber")),i(),g(36,t.form.get("password").value&&!t.form.get("password").hasError("hasNumber")?36:37),i(3),u("text-primary",t.form.get("password").value&&!t.form.get("password").hasError("hasUppercase")),i(),g(40,t.form.get("password").value&&!t.form.get("password").hasError("hasUppercase")?40:41),i(3),u("text-primary",t.form.get("password").value&&!t.form.get("password").hasError("hasLowercase")),i(),g(44,t.form.get("password").value&&!t.form.get("password").hasError("hasLowercase")?44:45),i(3),u("text-primary",t.form.get("password").value&&!t.form.get("password").hasError("hasSpecialCharacter")),i(),g(48,t.form.get("password").value&&!t.form.get("password").hasError("hasSpecialCharacter")?48:49),i(6),s("type",t.passwordInputType),i(3),s("svgIcon",t.passwordInputType==="password"?"eye":"eye-off"),i(),s("ngIf",(M=t.form.get("confirmPassword"))==null?null:M.hasError("required")),i(),s("ngIf",(N=t.form.get("confirmPassword"))==null?null:N.hasError("minlength")),i(),s("ngIf",(k=t.form.get("confirmPassword"))==null?null:k.hasError("maxlength")),i(),s("ngIf",(A=t.form.get("confirmPassword"))==null?null:A.hasError("hasNumber")),i(),s("ngIf",(V=t.form.get("confirmPassword"))==null?null:V.hasError("hasUppercase")),i(),s("ngIf",(D=t.form.get("confirmPassword"))==null?null:D.hasError("hasLowercase")),i(),s("ngIf",(L=t.form.get("confirmPassword"))==null?null:L.hasError("hasSpecialCharacter")),i(),s("ngIf",(O=t.form.get("confirmPassword"))==null?null:O.hasError("passwordMatch"))}},dependencies:[Q,B,J,K,W,oe,me,ne,se,ae,fe,le,pe,ce,de,ue,ge,E,P,ee,X,Y,Z,te,re],styles:["main[_ngcontent-%COMP%]{display:grid;width:100%;height:100%}main[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%;max-width:500px;place-self:center}mat-card-actions[_ngcontent-%COMP%]{padding:0 16px 16px!important;display:grid;row-gap:12px;grid-auto-rows:max-content}.password-field[_ngcontent-%COMP%]{margin-bottom:-1.25em}mat-card[_ngcontent-%COMP%]{border-radius:25px;box-shadow:0 0 12px #0003;background-color:#f5f5f5}"]});let e=r;return e})();var Ge=[{path:"",component:Ce}],ye=(()=>{let r=class r{};r.\u0275fac=function(l){return new(l||r)},r.\u0275mod=w({type:r}),r.\u0275inj=_({imports:[T.forChild(Ge),T]});let e=r;return e})();var Ct=(()=>{let r=class r{};r.\u0275fac=function(l){return new(l||r)},r.\u0275mod=w({type:r}),r.\u0275inj=_({imports:[U,ye,he,_e,ie]});let e=r;return e})();export{Ct as RegisterModule};
